{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Routes,Route,Navigate,useLocation}from'react-router-dom';import{AuthProvider,useAuth}from'./AuthContext';import Sidebar from'./components/Sidebar';import PostGenerator from'./components/PostGenerator';import PostReview from'./components/PostReview';import PostScheduler from'./components/PostScheduler';import Analytics from'./components/Analytics';import Login from'./components/Login';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AppContent(){const[posts,setPosts]=useState([]);const[post,setPost]=useState('');const{user,setAuthenticatedUser}=useAuth();const location=useLocation();const[isLoading,setIsLoading]=useState(true);// Start with loading true\nuseEffect(()=>{console.log('useEffect - Initial user:',user);const query=new URLSearchParams(location.search);const authenticated=query.get('authenticated')==='true';const userUrn=query.get('user_urn');if(authenticated&&userUrn&&!user){console.log('useEffect - Authenticating with user_urn:',userUrn);setAuthenticatedUser(userUrn,'');axios.get('http://localhost:5000/api/analytics',{params:{user_urn:userUrn}}).then(response=>{console.log('useEffect - Analytics response:',response.data);}).catch(error=>{var _error$response;console.error('useEffect - Analytics error:',((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data)||error);}).finally(()=>{console.log('useEffect - Authentication complete');setIsLoading(false);});}else{console.log('useEffect - No authentication needed or already authenticated');setIsLoading(false);}},[location,setAuthenticatedUser,user]);console.log('AppContent render - user:',user,'isLoading:',isLoading);if(isLoading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"flex min-h-screen bg-gray-100\",children:[/*#__PURE__*/_jsx(Sidebar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 p-6 ml-64\",children:user?/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(PostGenerator,{onPostsGenerated:ps=>setPosts(ps)})}),/*#__PURE__*/_jsx(Route,{path:\"/review\",element:/*#__PURE__*/_jsx(PostReview,{posts:posts,onPostSelected:ed=>setPost(ed)})}),/*#__PURE__*/_jsx(Route,{path:\"/schedule\",element:/*#__PURE__*/_jsx(PostScheduler,{post:post})}),/*#__PURE__*/_jsx(Route,{path:\"/analytics\",element:/*#__PURE__*/_jsx(Analytics,{})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/\"})})]}):/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})})]})})]});}function App(){return/*#__PURE__*/_jsx(AuthProvider,{children:/*#__PURE__*/_jsx(AppContent,{})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","Routes","Route","Navigate","useLocation","AuthProvider","useAuth","Sidebar","PostGenerator","PostReview","PostScheduler","Analytics","Login","axios","jsx","_jsx","jsxs","_jsxs","AppContent","posts","setPosts","post","setPost","user","setAuthenticatedUser","location","isLoading","setIsLoading","console","log","query","URLSearchParams","search","authenticated","get","userUrn","params","user_urn","then","response","data","catch","error","_error$response","finally","children","className","path","element","onPostsGenerated","ps","onPostSelected","ed","to","App"],"sources":["/home/prashant/Documents/work-related/projects/test/linkedin-agent/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Routes, Route, Navigate, useLocation } from 'react-router-dom';\nimport { AuthProvider, useAuth } from './AuthContext';\nimport Sidebar from './components/Sidebar';\nimport PostGenerator from './components/PostGenerator';\nimport PostReview from './components/PostReview';\nimport PostScheduler from './components/PostScheduler';\nimport Analytics from './components/Analytics';\nimport Login from './components/Login';\nimport axios from 'axios';\n\nfunction AppContent() {\n  const [posts, setPosts] = useState([]);\n  const [post, setPost] = useState('');\n  const { user, setAuthenticatedUser } = useAuth();\n  const location = useLocation();\n  const [isLoading, setIsLoading] = useState(true); // Start with loading true\n\n  useEffect(() => {\n    console.log('useEffect - Initial user:', user);\n    const query = new URLSearchParams(location.search);\n    const authenticated = query.get('authenticated') === 'true';\n    const userUrn = query.get('user_urn');\n\n    if (authenticated && userUrn && !user) {\n      console.log('useEffect - Authenticating with user_urn:', userUrn);\n      setAuthenticatedUser(userUrn, '');\n      axios.get('http://localhost:5000/api/analytics', { params: { user_urn: userUrn } })\n        .then((response) => {\n          console.log('useEffect - Analytics response:', response.data);\n        })\n        .catch((error) => {\n          console.error('useEffect - Analytics error:', error.response?.data || error);\n        })\n        .finally(() => {\n          console.log('useEffect - Authentication complete');\n          setIsLoading(false);\n        });\n    } else {\n      console.log('useEffect - No authentication needed or already authenticated');\n      setIsLoading(false);\n    }\n  }, [location, setAuthenticatedUser, user]);\n\n  console.log('AppContent render - user:', user, 'isLoading:', isLoading);\n\n  if (isLoading) {\n    return <div>Loading...</div>;\n  }\n\n  return (\n    <div className=\"flex min-h-screen bg-gray-100\">\n      <Sidebar />\n      <div className=\"flex-1 p-6 ml-64\">\n        {user ? (\n          <Routes>\n            <Route path=\"/\" element={<PostGenerator onPostsGenerated={(ps) => setPosts(ps)} />} />\n            <Route path=\"/review\" element={<PostReview posts={posts} onPostSelected={(ed) => setPost(ed)} />} />\n            <Route path=\"/schedule\" element={<PostScheduler post={post} />} />\n            <Route path=\"/analytics\" element={<Analytics />} />\n            <Route path=\"*\" element={<Navigate to=\"/\" />} />\n          </Routes>\n        ) : (\n          <Routes>\n            <Route path=\"/login\" element={<Login />} />\n            <Route path=\"*\" element={<Navigate to=\"/login\" />} />\n          </Routes>\n        )}\n      </div>\n    </div>\n  );\n}\n\nfunction App() {\n  return (\n    <AuthProvider>\n      <AppContent />\n    </AuthProvider>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}