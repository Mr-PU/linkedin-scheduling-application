{"ast":null,"code":"import React,{createContext,useState,useContext}from'react';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";const AuthContext=/*#__PURE__*/createContext();export function AuthProvider(_ref){let{children}=_ref;const[user,setUser]=useState(null);// { urn, accessToken, name, designation }\nconst loginWithLinkedIn=()=>{console.log('Initiating LinkedIn login');window.location.href='http://localhost:5000/api/linkedin-login';};const setAuthenticatedUser=async(userUrn,accessToken)=>{console.log('Setting authenticated user with user_urn:',userUrn);try{const response=await axios.get('http://localhost:5000/api/me',{params:{user_urn:userUrn}});console.log('Profile response from /api/me:',response.data);const{name,designation}=response.data;if(!name){console.warn('No name in response, using fallback');}setUser({urn:userUrn,accessToken,name:name||'Unknown User',designation:designation||'No Designation'});}catch(error){var _error$response;console.error('Error fetching profile:',((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data)||error.message);setUser({urn:userUrn,accessToken,name:'Unknown User',designation:'No Designation'});}};const logout=()=>{console.log('Logging out');setUser(null);};console.log('AuthProvider render - user:',user);return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user,loginWithLinkedIn,setAuthenticatedUser,logout},children:children});}export function useAuth(){const context=useContext(AuthContext);if(context===undefined){throw new Error('useAuth must be used within an AuthProvider');}return context;}","map":{"version":3,"names":["React","createContext","useState","useContext","axios","jsx","_jsx","AuthContext","AuthProvider","_ref","children","user","setUser","loginWithLinkedIn","console","log","window","location","href","setAuthenticatedUser","userUrn","accessToken","response","get","params","user_urn","data","name","designation","warn","urn","error","_error$response","message","logout","Provider","value","useAuth","context","undefined","Error"],"sources":["/home/prashant/Documents/work-related/projects/test/linkedin-agent/frontend/src/AuthContext.js"],"sourcesContent":["import React, { createContext, useState, useContext } from 'react';\nimport axios from 'axios';\n\nconst AuthContext = createContext();\n\nexport function AuthProvider({ children }) {\n  const [user, setUser] = useState(null); // { urn, accessToken, name, designation }\n\n  const loginWithLinkedIn = () => {\n    console.log('Initiating LinkedIn login');\n    window.location.href = 'http://localhost:5000/api/linkedin-login';\n  };\n\n  const setAuthenticatedUser = async (userUrn, accessToken) => {\n    console.log('Setting authenticated user with user_urn:', userUrn);\n    try {\n      const response = await axios.get('http://localhost:5000/api/me', {\n        params: { user_urn: userUrn },\n      });\n      console.log('Profile response from /api/me:', response.data);\n      const { name, designation } = response.data;\n      if (!name) {\n        console.warn('No name in response, using fallback');\n      }\n      setUser({ urn: userUrn, accessToken, name: name || 'Unknown User', designation: designation || 'No Designation' });\n    } catch (error) {\n      console.error('Error fetching profile:', error.response?.data || error.message);\n      setUser({ urn: userUrn, accessToken, name: 'Unknown User', designation: 'No Designation' });\n    }\n  };\n\n  const logout = () => {\n    console.log('Logging out');\n    setUser(null);\n  };\n\n  console.log('AuthProvider render - user:', user);\n\n  return (\n    <AuthContext.Provider value={{ user, loginWithLinkedIn, setAuthenticatedUser, logout }}>\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n}"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,QAAQ,CAAEC,UAAU,KAAQ,OAAO,CAClE,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE1B,KAAM,CAAAC,WAAW,cAAGN,aAAa,CAAC,CAAC,CAEnC,MAAO,SAAS,CAAAO,YAAYA,CAAAC,IAAA,CAAe,IAAd,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACvC,KAAM,CAACE,IAAI,CAAEC,OAAO,CAAC,CAAGV,QAAQ,CAAC,IAAI,CAAC,CAAE;AAExC,KAAM,CAAAW,iBAAiB,CAAGA,CAAA,GAAM,CAC9BC,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAC,CACxCC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAG,0CAA0C,CACnE,CAAC,CAED,KAAM,CAAAC,oBAAoB,CAAG,KAAAA,CAAOC,OAAO,CAAEC,WAAW,GAAK,CAC3DP,OAAO,CAACC,GAAG,CAAC,2CAA2C,CAAEK,OAAO,CAAC,CACjE,GAAI,CACF,KAAM,CAAAE,QAAQ,CAAG,KAAM,CAAAlB,KAAK,CAACmB,GAAG,CAAC,8BAA8B,CAAE,CAC/DC,MAAM,CAAE,CAAEC,QAAQ,CAAEL,OAAQ,CAC9B,CAAC,CAAC,CACFN,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAEO,QAAQ,CAACI,IAAI,CAAC,CAC5D,KAAM,CAAEC,IAAI,CAAEC,WAAY,CAAC,CAAGN,QAAQ,CAACI,IAAI,CAC3C,GAAI,CAACC,IAAI,CAAE,CACTb,OAAO,CAACe,IAAI,CAAC,qCAAqC,CAAC,CACrD,CACAjB,OAAO,CAAC,CAAEkB,GAAG,CAAEV,OAAO,CAAEC,WAAW,CAAEM,IAAI,CAAEA,IAAI,EAAI,cAAc,CAAEC,WAAW,CAAEA,WAAW,EAAI,gBAAiB,CAAC,CAAC,CACpH,CAAE,MAAOG,KAAK,CAAE,KAAAC,eAAA,CACdlB,OAAO,CAACiB,KAAK,CAAC,yBAAyB,CAAE,EAAAC,eAAA,CAAAD,KAAK,CAACT,QAAQ,UAAAU,eAAA,iBAAdA,eAAA,CAAgBN,IAAI,GAAIK,KAAK,CAACE,OAAO,CAAC,CAC/ErB,OAAO,CAAC,CAAEkB,GAAG,CAAEV,OAAO,CAAEC,WAAW,CAAEM,IAAI,CAAE,cAAc,CAAEC,WAAW,CAAE,gBAAiB,CAAC,CAAC,CAC7F,CACF,CAAC,CAED,KAAM,CAAAM,MAAM,CAAGA,CAAA,GAAM,CACnBpB,OAAO,CAACC,GAAG,CAAC,aAAa,CAAC,CAC1BH,OAAO,CAAC,IAAI,CAAC,CACf,CAAC,CAEDE,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAEJ,IAAI,CAAC,CAEhD,mBACEL,IAAA,CAACC,WAAW,CAAC4B,QAAQ,EAACC,KAAK,CAAE,CAAEzB,IAAI,CAAEE,iBAAiB,CAAEM,oBAAoB,CAAEe,MAAO,CAAE,CAAAxB,QAAA,CACpFA,QAAQ,CACW,CAAC,CAE3B,CAEA,MAAO,SAAS,CAAA2B,OAAOA,CAAA,CAAG,CACxB,KAAM,CAAAC,OAAO,CAAGnC,UAAU,CAACI,WAAW,CAAC,CACvC,GAAI+B,OAAO,GAAKC,SAAS,CAAE,CACzB,KAAM,IAAI,CAAAC,KAAK,CAAC,6CAA6C,CAAC,CAChE,CACA,MAAO,CAAAF,OAAO,CAChB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}